(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function E(){}function De(e){return e()}function Ee(){return Object.create(null)}function P(e){e.forEach(De)}function Ie(e){return typeof e=="function"}function ye(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ie;function Se(e,t){return ie||(ie=document.createElement("a")),ie.href=t,e===ie.href}function st(e){return Object.keys(e).length===0}const ct=typeof window<"u";let ut=ct?e=>requestAnimationFrame(e):E;const Ne=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in Ne;function T(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function at(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function Oe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function U(e){return document.createTextNode(e)}function I(){return U(" ")}function w(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function C(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ft(e){return Array.from(e.childNodes)}function Re(e,t){t=""+t,e.data!==t&&(e.data=t)}function he(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let oe;function dt(){if(oe===void 0){oe=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{oe=!0}}return oe}function _t(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=v("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=dt();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=w(window,"message",s=>{s.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=w(i.contentWindow,"resize",t),t()}),T(e,i),()=>{(o||r&&i.contentWindow)&&r(),m(i)}}function re(e,t,n){e.classList[n?"add":"remove"](t)}let ee;function $(e){ee=e}function Fe(){if(!ee)throw new Error("Function called outside component initialization");return ee}function pt(e){Fe().$$.on_mount.push(e)}function ht(e){Fe().$$.on_destroy.push(e)}function q(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const G=[],me=[];let J=[];const Ae=[],Pe=Promise.resolve();let ge=!1;function Ue(){ge||(ge=!0,Pe.then(ze))}function mt(){return Ue(),Pe}function se(e){J.push(e)}const _e=new Set;let Y=0;function ze(){if(Y!==0)return;const e=ee;do{try{for(;Y<G.length;){const t=G[Y];Y++,$(t),gt(t.$$)}}catch(t){throw G.length=0,Y=0,t}for($(null),G.length=0,Y=0;me.length;)me.pop()();for(let t=0;t<J.length;t+=1){const n=J[t];_e.has(n)||(_e.add(n),n())}J.length=0}while(G.length);for(;Ae.length;)Ae.pop()();ge=!1,_e.clear(),$(e)}function gt(e){if(e.fragment!==null){e.update(),P(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(se)}}function yt(e){const t=[],n=[];J.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),J=t}const le=new Set;let H;function Te(){H={r:0,c:[],p:H}}function Le(){H.r||P(H.c),H=H.p}function j(e,t){e&&e.i&&(le.delete(e),e.i(t))}function Z(e,t,n,i){if(e&&e.o){if(le.has(e))return;le.add(e),H.c.push(()=>{le.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const wt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...wt];function We(e){e&&e.c()}function we(e,t,n,i){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),i||se(()=>{const s=e.$$.on_mount.map(De).filter(Ie);e.$$.on_destroy?e.$$.on_destroy.push(...s):P(s),e.$$.on_mount=[]}),r.forEach(se)}function be(e,t){const n=e.$$;n.fragment!==null&&(yt(n.after_update),P(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function bt(e,t){e.$$.dirty[0]===-1&&(G.push(e),Ue(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ve(e,t,n,i,o,r,s,y=[-1]){const u=ee;$(e);const c=e.$$={fragment:null,ctx:[],props:r,update:E,not_equal:o,bound:Ee(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:Ee(),dirty:y,skip_bound:!1,root:t.target||u.$$.root};s&&s(c.root);let b=!1;if(c.ctx=n?n(e,t.props||{},(h,f,...l)=>{const _=l.length?l[0]:f;return c.ctx&&o(c.ctx[h],c.ctx[h]=_)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](_),b&&bt(e,h)),f}):[],c.update(),b=!0,P(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const h=ft(t.target);c.fragment&&c.fragment.l(h),h.forEach(m)}else c.fragment&&c.fragment.c();t.intro&&j(e.$$.fragment),we(e,t.target,t.anchor,t.customElement),ze()}$(u)}class ke{$destroy(){be(this,1),this.$destroy=E}$on(t,n){if(!Ie(n))return E;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!st(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function vt(e){let t,n,i,o,r,s,y,u,c,b,h,f,l;return{c(){t=v("div"),n=v("div"),i=U(e[2]),o=I(),r=v("label"),s=v("input"),y=I(),u=v("span"),c=I(),b=v("div"),h=U(e[3]),d(n,"class","left-option svelte-1a1qoh6"),re(n,"active",!e[0]),d(s,"type","checkbox"),d(s,"class","svelte-1a1qoh6"),d(u,"class","slider svelte-1a1qoh6"),d(r,"class","switch svelte-1a1qoh6"),d(b,"class","right-option svelte-1a1qoh6"),re(b,"active",e[0]),d(t,"class","switch-wrapper svelte-1a1qoh6"),he(t,"--color",e[1])},m(_,k){g(_,t,k),T(t,n),T(n,i),T(t,o),T(t,r),T(r,s),s.checked=e[0],T(r,y),T(r,u),T(t,c),T(t,b),T(b,h),f||(l=[w(s,"change",e[9]),w(s,"change",e[8]),w(s,"change",kt),w(t,"mousedown",C(e[4])),w(t,"mouseup",C(e[5])),w(t,"touchstart",C(e[6])),w(t,"touchend",C(e[7]))],f=!0)},p(_,[k]){k&4&&Re(i,_[2]),k&1&&re(n,"active",!_[0]),k&1&&(s.checked=_[0]),k&8&&Re(h,_[3]),k&1&&re(b,"active",_[0]),k&2&&he(t,"--color",_[1])},i:E,o:E,d(_){_&&m(t),f=!1,P(l)}}}const kt=e=>e.target.blur();function Et(e,t,n){let{checked:i=!1}=t,{color:o="var(--color-main)"}=t,{left:r="manual"}=t,{right:s="automatic"}=t;function y(l){q.call(this,e,l)}function u(l){q.call(this,e,l)}function c(l){q.call(this,e,l)}function b(l){q.call(this,e,l)}function h(l){q.call(this,e,l)}function f(){i=this.checked,n(0,i)}return e.$$set=l=>{"checked"in l&&n(0,i=l.checked),"color"in l&&n(1,o=l.color),"left"in l&&n(2,r=l.left),"right"in l&&n(3,s=l.right)},[i,o,r,s,y,u,c,b,h,f]}class St extends ke{constructor(t){super(),ve(this,t,Et,vt,ye,{checked:0,color:1,left:2,right:3})}}function Rt(e){let t,n;return{c:E,m(i,o){t||(n=[w(window,"keydown",e[0]),w(window,"keyup",e[1])],t=!0)},p:E,i:E,o:E,d(i){t=!1,P(n)}}}function At(e,t,n){let{record:i}=t,{stopRecording:o}=t;function r(u){u.preventDefault(),i()}pt(()=>{const u=document.querySelector("main");return u.addEventListener("mousedown",r),u.addEventListener("mouseup",o),u.addEventListener("touchstart",r),u.addEventListener("touchend",o),()=>{u.removeEventListener("mousedown",r),u.removeEventListener("mouseup",o),u.removeEventListener("touchstart",r),u.removeEventListener("touchend",o)}});function s(u){u.code==="Space"&&i()}function y(u){u.code==="Space"&&o()}return e.$$set=u=>{"record"in u&&n(2,i=u.record),"stopRecording"in u&&n(3,o=u.stopRecording)},[s,y,i,o]}class Tt extends ke{constructor(t){super(),ve(this,t,At,Rt,ye,{record:2,stopRecording:3})}}const{cancelAnimationFrame:Lt}=Ne;function Ce(e,t,n){const i=e.slice();return i[55]=t[n],i[57]=n,i}function Me(e){let t,n;return t=new Tt({props:{record:e[15],stopRecording:e[16]}}),{c(){We(t.$$.fragment)},m(i,o){we(t,i,o),n=!0},p:E,i(i){n||(j(t.$$.fragment,i),n=!0)},o(i){Z(t.$$.fragment,i),n=!1},d(i){be(t,i)}}}function Ct(e){let t,n;return{c(){t=v("b"),t.textContent="getUserMedia",n=U(" is not supported on your browser ðŸ˜”")},m(i,o){g(i,t,o),g(i,n,o)},p:E,i:E,o:E,d(i){i&&m(t),i&&m(n)}}}function Mt(e){let t,n,i;return{c(){t=v("p"),t.textContent="You need to grant access to your microphone",n=I(),i=v("p"),i.textContent="Watch out for a dialog or microphone icon in the address bar",he(t,"font-weight","bold")},m(o,r){g(o,t,r),g(o,n,r),g(o,i,r)},p:E,i:E,o:E,d(o){o&&m(t),o&&m(n),o&&m(i)}}}function qt(e){let t,n,i,o,r,s;t=new St({props:{checked:e[4]}}),t.$on("change",e[19]);function y(l,_){return l[4]?Nt:It}let u=y(e),c=u(e);function b(l,_){if(l[10])return Pt;if(!l[1]||l[11])return Ft;if(l[8])return Ot}let h=b(e),f=h&&h(e);return{c(){We(t.$$.fragment),n=I(),i=v("p"),c.c(),o=I(),r=v("div"),f&&f.c(),d(i,"id","instruction"),d(i,"class","svelte-1w98i0i"),d(r,"id","control-btns"),d(r,"class","svelte-1w98i0i")},m(l,_){we(t,l,_),g(l,n,_),g(l,i,_),c.m(i,null),g(l,o,_),g(l,r,_),f&&f.m(r,null),s=!0},p(l,_){const k={};_[0]&16&&(k.checked=l[4]),t.$set(k),u!==(u=y(l))&&(c.d(1),c=u(l),c&&(c.c(),c.m(i,null))),h===(h=b(l))&&f?f.p(l,_):(f&&f.d(1),f=h&&h(l),f&&(f.c(),f.m(r,null)))},i(l){s||(j(t.$$.fragment,l),s=!0)},o(l){Z(t.$$.fragment,l),s=!1},d(l){be(t,l),l&&m(n),l&&m(i),c.d(),l&&m(o),l&&m(r),f&&f.d()}}}function Dt(e){let t,n,i,o,r;return{c(){t=v("p"),t.textContent="Record yourself and listen to the echo",n=I(),i=v("button"),i.textContent="initialize",d(i,"id","init-btn"),d(i,"class","svelte-1w98i0i")},m(s,y){g(s,t,y),g(s,n,y),g(s,i,y),o||(r=w(i,"click",C(e[14])),o=!0)},p:E,i:E,o:E,d(s){s&&m(t),s&&m(n),s&&m(i),o=!1,r()}}}function It(e){let t,n,i,o,r;return{c(){t=U("Clickâ€‰/â€‰touch anywhere on the screen or press 'Space' "),n=v("u"),n.textContent="and hold",i=U(` to
                        record.`),o=v("br"),r=U(`
                        Release to stop recording and listen to playback in a loop.`)},m(s,y){g(s,t,y),g(s,n,y),g(s,i,y),g(s,o,y),g(s,r,y)},d(s){s&&m(t),s&&m(n),s&&m(i),s&&m(o),s&&m(r)}}}function Nt(e){let t,n,i;return{c(){t=U("Simply start speaking to start recording."),n=v("br"),i=U(`
                        Stop speaking to stop recording and listen to playback in a loop.`)},m(o,r){g(o,t,r),g(o,n,r),g(o,i,r)},d(o){o&&m(t),o&&m(n),o&&m(i)}}}function Ot(e){let t,n,i;return{c(){t=v("button"),t.textContent="â–¶ï¸Ž PLAY",d(t,"id","play-btn"),d(t,"class","svelte-1w98i0i")},m(o,r){g(o,t,r),n||(i=[w(t,"click",C(e[20])),w(t,"mousedown",C(e[25])),w(t,"mouseup",C(e[26])),w(t,"touchstart",C(e[27])),w(t,"touchend",C(e[28]))],n=!0)},p:E,d(o){o&&m(t),n=!1,P(i)}}}function Ft(e){let t,n,i;return{c(){t=v("button"),t.textContent="â—¼ï¸Ž STOP",d(t,"id","stop-btn"),d(t,"class","svelte-1w98i0i")},m(o,r){g(o,t,r),n||(i=[w(t,"click",C(e[17])),w(t,"mousedown",C(e[21])),w(t,"mouseup",C(e[22])),w(t,"touchstart",C(e[23])),w(t,"touchend",C(e[24]))],n=!0)},p:E,d(o){o&&m(t),n=!1,P(i)}}}function Pt(e){let t;return{c(){t=v("div"),t.textContent="REC",d(t,"class","recording svelte-1w98i0i")},m(n,i){g(n,t,i)},p:E,d(n){n&&m(t)}}}function qe(e){let t,n,i,o;return{c(){t=Oe("rect"),d(t,"width",e[12]),d(t,"height",n=e[55]/255*e[9]),d(t,"x",i=e[57]*e[12]),d(t,"y",o=e[9]-e[55]/255*e[9]),d(t,"fill","#ff3b00")},m(r,s){g(r,t,s)},p(r,s){s[0]&4096&&d(t,"width",r[12]),s[0]&544&&n!==(n=r[55]/255*r[9])&&d(t,"height",n),s[0]&4096&&i!==(i=r[57]*r[12])&&d(t,"x",i),s[0]&544&&o!==(o=r[9]-r[55]/255*r[9])&&d(t,"y",o)},d(r){r&&m(t)}}}function Ut(e){let t,n,i,o=!0,r=!1,s,y,u,c,b,h,f,l,_,k,M,V,N,z,K,S=e[2]&&!e[4]&&Me(e);function O(){Lt(s),n.paused||(s=ut(O),r=!0),e[32].call(n)}const W=[Dt,qt,Mt,Ct],F=[];function te(a,R){return a[2]?a[13]&&a[3]?1:a[13]&&!a[3]?2:3:0}f=te(e),l=F[f]=W[f](e);let B=e[5],A=[];for(let a=0;a<B.length;a+=1)A[a]=qe(Ce(e,B,a));return{c(){S&&S.c(),t=I(),n=v("audio"),y=I(),u=v("main"),c=v("div"),b=v("h1"),b.textContent="Svecho",h=I(),l.c(),_=I(),k=v("div"),M=Oe("svg");for(let a=0;a<A.length;a+=1)A[a].c();Se(n.src,i=e[8])||d(n,"src",i),d(b,"class","svelte-1w98i0i"),d(c,"id","control"),d(c,"class","svelte-1w98i0i"),d(M,"xmlns","http://www.w3.org/2000/svg"),d(M,"class","svelte-1w98i0i"),d(k,"id","visual-wrapper"),d(k,"class","svelte-1w98i0i"),se(()=>e[33].call(k)),d(u,"class","svelte-1w98i0i")},m(a,R){S&&S.m(a,R),g(a,t,R),g(a,n,R),e[30](n),g(a,y,R),g(a,u,R),T(u,c),T(c,b),T(c,h),F[f].m(c,null),T(u,_),T(u,k),T(k,M);for(let D=0;D<A.length;D+=1)A[D]&&A[D].m(M,null);V=_t(k,e[33].bind(k)),N=!0,z||(K=[w(window,"keydown",e[29]),w(n,"play",e[31]),w(n,"pause",e[31]),w(n,"timeupdate",O),w(n,"ended",e[18])],z=!0)},p(a,R){a[2]&&!a[4]?S?(S.p(a,R),R[0]&20&&j(S,1)):(S=Me(a),S.c(),j(S,1),S.m(t.parentNode,t)):S&&(Te(),Z(S,1,1,()=>{S=null}),Le()),(!N||R[0]&256&&!Se(n.src,i=a[8]))&&d(n,"src",i),R[0]&2&&o!==(o=a[1])&&n[o?"pause":"play"](),!r&&R[0]&128&&!isNaN(a[7])&&(n.currentTime=a[7]),r=!1;let D=f;if(f=te(a),f===D?F[f].p(a,R):(Te(),Z(F[D],1,1,()=>{F[D]=null}),Le(),l=F[f],l?l.p(a,R):(l=F[f]=W[f](a),l.c()),j(l,1),l.m(c,null)),R[0]&4640){B=a[5];let L;for(L=0;L<B.length;L+=1){const Q=Ce(a,B,L);A[L]?A[L].p(Q,R):(A[L]=qe(Q),A[L].c(),A[L].m(M,null))}for(;L<A.length;L+=1)A[L].d(1);A.length=B.length}},i(a){N||(j(S),j(l),N=!0)},o(a){Z(S),Z(l),N=!1},d(a){S&&S.d(a),a&&m(t),a&&m(n),e[30](null),a&&m(y),a&&m(u),F[f].d(),at(A,a),V(),z=!1,P(K)}}}const pe=128,zt=800,Wt=500,Bt=50,jt=600;function Vt(e,t,n){let i;const o=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=-45;let s=!1,y=!1,u=!1,c,b=[],h,f,l=[],_,k=[],M,V,N="",z,K,S=!1,O=!1,W=!0;async function F(){h=new AudioContext,await te(),B(),n(2,s=!0)}ht(()=>{clearInterval(ue),clearTimeout(X),clearTimeout(x)});async function te(){try{const p=await navigator.mediaDevices.getUserMedia({audio:!0});n(3,y=!0),c=new MediaRecorder(p),c.onstart=()=>{},c.ondataavailable=de=>{O?(b.push(de.data),n(10,O=!1)):b=[]},c.onstop=async()=>{if(b.length===0)return;const de=new Blob(b,{type:c.mimeType});b=[],N&&URL.revokeObjectURL(N),n(8,N=URL.createObjectURL(de)),await mt(),await ae()};const fe=h.createMediaStreamSource(p);_=h.createAnalyser(),_.fftSize=pe,_.minDecibels=r,fe.connect(_);const lt=_.frequencyBinCount;k=new Uint8Array(lt)}catch(p){console.error(`The following getUserMedia error occurred: ${p}`)}}function B(){const p=h.createMediaElementSource(M);f=h.createAnalyser(),f.fftSize=pe,p.connect(f),f.connect(h.destination);const fe=f.frequencyBinCount;n(5,l=new Uint8Array(fe))}let A;function a(){if(W){cancelAnimationFrame(A),n(5,l=l.fill(0));return}f.getByteFrequencyData(l),n(5,l),A=requestAnimationFrame(a)}let R;function D(){if(!u){cancelAnimationFrame(R);return}_.getByteFrequencyData(k),S=k.some(p=>p>0),S?He():Ke(),R=requestAnimationFrame(D)}async function L(){O||(n(10,O=!0),ce(),!u&&c.state==="inactive"&&c.start())}function Q(){O&&c.stop()}let ne=null;function ce(){clearTimeout(ne),n(11,ne=null),M.pause(),n(7,V=0)}function Be(){n(11,ne=setTimeout(ae,zt))}let ue;function je(){ue=setInterval(Ve,Wt)}function Ve(){O||(c.state==="recording"&&c.stop(),c.state==="inactive"&&c.start())}let X;function He(){clearTimeout(x),x=null,X||(X=setTimeout(()=>{L()},Bt))}let x;function Ke(){clearTimeout(X),X=null,x||(x=setTimeout(()=>{Q()},jt))}function Ye(p){n(4,u=p.target.checked),c.state==="recording"&&c.stop(),u?(c.start(),je(),D()):clearInterval(ue)}async function ae(){try{await M.play()}catch(p){console.error("ERROR playing audio",p)}}function Ge(p){q.call(this,e,p)}function Ze(p){q.call(this,e,p)}function Je(p){q.call(this,e,p)}function Qe(p){q.call(this,e,p)}function Xe(p){q.call(this,e,p)}function xe(p){q.call(this,e,p)}function $e(p){q.call(this,e,p)}function et(p){q.call(this,e,p)}const tt=p=>{p.code==="Escape"&&ce()};function nt(p){me[p?"unshift":"push"](()=>{M=p,n(6,M)})}function it(){W=this.paused,n(1,W)}function ot(){V=this.currentTime,n(7,V)}function rt(){z=this.clientWidth,K=this.clientHeight,n(0,z),n(9,K)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(12,i=z/pe*2),e.$$.dirty[0]&2&&(W||a())},[z,W,s,y,u,l,M,V,N,K,O,ne,i,o,F,L,Q,ce,Be,Ye,ae,Ge,Ze,Je,Qe,Xe,xe,$e,et,tt,nt,it,ot,rt]}class Ht extends ke{constructor(t){super(),ve(this,t,Vt,Ut,ye,{},null,[-1,-1])}}new Ht({target:document.getElementById("app")});
