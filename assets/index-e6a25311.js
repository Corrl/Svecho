(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function E(){}function Se(e){return e()}function ye(){return Object.create(null)}function F(e){e.forEach(Se)}function Ee(e){return typeof e=="function"}function Te(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ee;function ge(e,t){return ee||(ee=document.createElement("a")),ee.href=t,e===ee.href}function $e(e){return Object.keys(e).length===0}const et=typeof window<"u";let tt=et?e=>requestAnimationFrame(e):E;const nt=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in nt;function A(e,t){e.appendChild(t)}function b(e,t,n){e.insertBefore(t,n||null)}function g(e){e.parentNode&&e.parentNode.removeChild(e)}function it(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function k(e){return document.createElement(e)}function Ae(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function U(e){return document.createTextNode(e)}function O(){return U(" ")}function w(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function ot(e){return function(t){return t.preventDefault(),e.call(this,t)}}function N(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function p(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function rt(e){return Array.from(e.childNodes)}function be(e,t){t=""+t,e.data!==t&&(e.data=t)}function fe(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let te;function lt(){if(te===void 0){te=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{te=!0}}return te}function st(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=k("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=lt();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=w(window,"message",l=>{l.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=w(i.contentWindow,"resize",t),t()}),A(e,i),()=>{(o||r&&i.contentWindow)&&r(),g(i)}}function ne(e,t,n){e.classList[n?"add":"remove"](t)}let Q;function J(e){Q=e}function ct(){if(!Q)throw new Error("Function called outside component initialization");return Q}function ut(e){ct().$$.on_destroy.push(e)}function D(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const H=[],de=[];let K=[];const we=[],Ce=Promise.resolve();let pe=!1;function Re(){pe||(pe=!0,Ce.then(Me))}function at(){return Re(),Ce}function oe(e){K.push(e)}const ue=new Set;let j=0;function Me(){if(j!==0)return;const e=Q;do{try{for(;j<H.length;){const t=H[j];j++,J(t),ft(t.$$)}}catch(t){throw H.length=0,j=0,t}for(J(null),H.length=0,j=0;de.length;)de.pop()();for(let t=0;t<K.length;t+=1){const n=K[t];ue.has(n)||(ue.add(n),n())}K.length=0}while(H.length);for(;we.length;)we.pop()();pe=!1,ue.clear(),J(e)}function ft(e){if(e.fragment!==null){e.update(),F(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(oe)}}function dt(e){const t=[],n=[];K.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),K=t}const ie=new Set;let B;function pt(){B={r:0,c:[],p:B}}function _t(){B.r||F(B.c),B=B.p}function re(e,t){e&&e.i&&(ie.delete(e),e.i(t))}function _e(e,t,n,i){if(e&&e.o){if(ie.has(e))return;ie.add(e),B.c.push(()=>{ie.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const ht=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...ht];function mt(e){e&&e.c()}function qe(e,t,n,i){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),i||oe(()=>{const l=e.$$.on_mount.map(Se).filter(Ee);e.$$.on_destroy?e.$$.on_destroy.push(...l):F(l),e.$$.on_mount=[]}),r.forEach(oe)}function Ie(e,t){const n=e.$$;n.fragment!==null&&(dt(n.after_update),F(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(e,t){e.$$.dirty[0]===-1&&(H.push(e),Re(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function Le(e,t,n,i,o,r,l,_=[-1]){const h=Q;J(e);const u=e.$$={fragment:null,ctx:[],props:r,update:E,not_equal:o,bound:ye(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(h?h.$$.context:[])),callbacks:ye(),dirty:_,skip_bound:!1,root:t.target||h.$$.root};l&&l(u.root);let v=!1;if(u.ctx=n?n(e,t.props||{},(f,m,...a)=>{const c=a.length?a[0]:m;return u.ctx&&o(u.ctx[f],u.ctx[f]=c)&&(!u.skip_bound&&u.bound[f]&&u.bound[f](c),v&&yt(e,f)),m}):[],u.update(),v=!0,F(u.before_update),u.fragment=i?i(u.ctx):!1,t.target){if(t.hydrate){const f=rt(t.target);u.fragment&&u.fragment.l(f),f.forEach(g)}else u.fragment&&u.fragment.c();t.intro&&re(e.$$.fragment),qe(e,t.target,t.anchor,t.customElement),Me()}J(h)}class Ne{$destroy(){Ie(this,1),this.$destroy=E}$on(t,n){if(!Ee(n))return E;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!$e(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function gt(e){let t,n,i,o,r,l,_,h,u,v,f,m,a;return{c(){t=k("div"),n=k("div"),i=U(e[2]),o=O(),r=k("label"),l=k("input"),_=O(),h=k("span"),u=O(),v=k("div"),f=U(e[3]),p(n,"class","left-option svelte-1a1qoh6"),ne(n,"active",!e[0]),p(l,"type","checkbox"),p(l,"class","svelte-1a1qoh6"),p(h,"class","slider svelte-1a1qoh6"),p(r,"class","switch svelte-1a1qoh6"),p(v,"class","right-option svelte-1a1qoh6"),ne(v,"active",e[0]),p(t,"class","switch-wrapper svelte-1a1qoh6"),fe(t,"--color",e[1])},m(c,s){b(c,t,s),A(t,n),A(n,i),A(t,o),A(t,r),A(r,l),l.checked=e[0],A(r,_),A(r,h),A(t,u),A(t,v),A(v,f),m||(a=[w(l,"change",e[9]),w(l,"change",e[8]),w(l,"change",bt),w(t,"mousedown",N(e[4])),w(t,"mouseup",N(e[5])),w(t,"touchstart",N(e[6])),w(t,"touchend",N(e[7]))],m=!0)},p(c,[s]){s&4&&be(i,c[2]),s&1&&ne(n,"active",!c[0]),s&1&&(l.checked=c[0]),s&8&&be(f,c[3]),s&1&&ne(v,"active",c[0]),s&2&&fe(t,"--color",c[1])},i:E,o:E,d(c){c&&g(t),m=!1,F(a)}}}const bt=e=>e.target.blur();function wt(e,t,n){let{checked:i=!1}=t,{color:o="var(--color-main)"}=t,{left:r="manual"}=t,{right:l="automatic"}=t;function _(a){D.call(this,e,a)}function h(a){D.call(this,e,a)}function u(a){D.call(this,e,a)}function v(a){D.call(this,e,a)}function f(a){D.call(this,e,a)}function m(){i=this.checked,n(0,i)}return e.$$set=a=>{"checked"in a&&n(0,i=a.checked),"color"in a&&n(1,o=a.color),"left"in a&&n(2,r=a.left),"right"in a&&n(3,l=a.right)},[i,o,r,l,_,h,u,v,f,m]}class vt extends Ne{constructor(t){super(),Le(this,t,wt,gt,Te,{checked:0,color:1,left:2,right:3})}}function ve(e,t,n){const i=e.slice();return i[50]=t[n],i[52]=n,i}function kt(e){let t,n;return{c(){t=k("b"),t.textContent="getUserMedia",n=U(" is not supported on your browser ðŸ˜”")},m(i,o){b(i,t,o),b(i,n,o)},p:E,i:E,o:E,d(i){i&&g(t),i&&g(n)}}}function St(e){let t,n,i;return{c(){t=k("p"),t.textContent="You need to grant access to your microphone",n=O(),i=k("p"),i.textContent="Watch out for a dialog or microphone icon in the address bar",fe(t,"font-weight","bold")},m(o,r){b(o,t,r),b(o,n,r),b(o,i,r)},p:E,i:E,o:E,d(o){o&&g(t),o&&g(n),o&&g(i)}}}function Et(e){let t,n,i,o,r,l,_,h;t=new vt({props:{checked:e[4]}}),t.$on("change",e[21]);function u(s,S){return s[4]?Ct:At}let v=u(e),f=v(e);function m(s,S){if(s[10])return qt;if(!s[1]||s[11])return Mt;if(s[8])return Rt}let a=m(e),c=a&&a(e);return{c(){mt(t.$$.fragment),n=O(),i=k("p"),f.c(),o=O(),r=k("div"),c&&c.c(),p(i,"id","instruction"),p(i,"class","svelte-ls3vlp"),p(r,"id","control-btns"),p(r,"class","svelte-ls3vlp")},m(s,S){qe(t,s,S),b(s,n,S),b(s,i,S),f.m(i,null),b(s,o,S),b(s,r,S),c&&c.m(r,null),l=!0,_||(h=[w(r,"click",N(e[23])),w(r,"mousedown",N(e[24])),w(r,"mouseup",N(e[25])),w(r,"touchstart",N(e[26])),w(r,"touchend",N(e[27]))],_=!0)},p(s,S){const q={};S[0]&16&&(q.checked=s[4]),t.$set(q),v!==(v=u(s))&&(f.d(1),f=v(s),f&&(f.c(),f.m(i,null))),a===(a=m(s))&&c?c.p(s,S):(c&&c.d(1),c=a&&a(s),c&&(c.c(),c.m(r,null)))},i(s){l||(re(t.$$.fragment,s),l=!0)},o(s){_e(t.$$.fragment,s),l=!1},d(s){Ie(t,s),s&&g(n),s&&g(i),f.d(),s&&g(o),s&&g(r),c&&c.d(),_=!1,F(h)}}}function Tt(e){let t,n,i,o,r;return{c(){t=k("p"),t.textContent="Record yourself and listen to the echo",n=O(),i=k("button"),i.textContent="initialize",p(i,"id","init-btn"),p(i,"class","svelte-ls3vlp")},m(l,_){b(l,t,_),b(l,n,_),b(l,i,_),o||(r=w(i,"click",N(e[14])),o=!0)},p:E,i:E,o:E,d(l){l&&g(t),l&&g(n),l&&g(i),o=!1,r()}}}function At(e){let t,n,i,o,r;return{c(){t=U("Clickâ€‰/â€‰touch anywhere on the screen or press 'Space' "),n=k("u"),n.textContent="and hold",i=U(` to
                        record.`),o=k("br"),r=U(`
                        Release to stop recording and listen to playback in a loop.`)},m(l,_){b(l,t,_),b(l,n,_),b(l,i,_),b(l,o,_),b(l,r,_)},d(l){l&&g(t),l&&g(n),l&&g(i),l&&g(o),l&&g(r)}}}function Ct(e){let t,n,i;return{c(){t=U("Simply start speaking to start recording."),n=k("br"),i=U(`
                        Stop speaking to stop recording and listen to playback in a loop.`)},m(o,r){b(o,t,r),b(o,n,r),b(o,i,r)},d(o){o&&g(t),o&&g(n),o&&g(i)}}}function Rt(e){let t,n,i;return{c(){t=k("button"),t.textContent="â–¶ï¸Ž PLAY",p(t,"id","play-btn"),p(t,"class","svelte-ls3vlp")},m(o,r){b(o,t,r),n||(i=w(t,"click",e[22]),n=!0)},p:E,d(o){o&&g(t),n=!1,i()}}}function Mt(e){let t,n,i;return{c(){t=k("button"),t.textContent="â—¼ï¸Ž STOP",p(t,"id","stop-btn"),p(t,"class","svelte-ls3vlp")},m(o,r){b(o,t,r),n||(i=w(t,"click",e[15]),n=!0)},p:E,d(o){o&&g(t),n=!1,i()}}}function qt(e){let t;return{c(){t=k("div"),t.textContent="REC",p(t,"class","recording svelte-ls3vlp")},m(n,i){b(n,t,i)},p:E,d(n){n&&g(t)}}}function ke(e){let t,n,i,o;return{c(){t=Ae("rect"),p(t,"width",e[12]),p(t,"height",n=e[50]/255*e[9]),p(t,"x",i=e[52]*e[12]),p(t,"y",o=e[9]-e[50]/255*e[9]),p(t,"fill","#ff3b00")},m(r,l){b(r,t,l)},p(r,l){l[0]&4096&&p(t,"width",r[12]),l[0]&544&&n!==(n=r[50]/255*r[9])&&p(t,"height",n),l[0]&4096&&i!==(i=r[52]*r[12])&&p(t,"x",i),l[0]&544&&o!==(o=r[9]-r[50]/255*r[9])&&p(t,"y",o)},d(r){r&&g(t)}}}function It(e){let t,n,i=!0,o=!1,r,l,_,h,u,v,f,m,a,c,s,S,q,W,V;function L(){cancelAnimationFrame(r),t.paused||(r=tt(L),o=!0),e[30].call(t)}const P=[Tt,Et,St,kt],M=[];function X(d,C){return d[2]?d[13]&&d[3]?1:d[13]&&!d[3]?2:3:0}f=X(e),m=M[f]=P[f](e);let z=e[5],T=[];for(let d=0;d<z.length;d+=1)T[d]=ke(ve(e,z,d));return{c(){t=k("audio"),l=O(),_=k("main"),h=k("div"),u=k("h1"),u.textContent="Svecho",v=O(),m.c(),a=O(),c=k("div"),s=Ae("svg");for(let d=0;d<T.length;d+=1)T[d].c();ge(t.src,n=e[8])||p(t,"src",n),p(u,"class","svelte-ls3vlp"),p(h,"id","control"),p(h,"class","svelte-ls3vlp"),p(s,"xmlns","http://www.w3.org/2000/svg"),p(s,"class","svelte-ls3vlp"),p(c,"id","visual-wrapper"),p(c,"class","svelte-ls3vlp"),oe(()=>e[31].call(c)),p(_,"class","svelte-ls3vlp")},m(d,C){b(d,t,C),e[28](t),b(d,l,C),b(d,_,C),A(_,h),A(h,u),A(h,v),M[f].m(h,null),A(_,a),A(_,c),A(c,s);for(let I=0;I<T.length;I+=1)T[I]&&T[I].m(s,null);S=st(c,e[31].bind(c)),q=!0,W||(V=[w(window,"keydown",e[17]),w(window,"keyup",e[18]),w(t,"play",e[29]),w(t,"pause",e[29]),w(t,"timeupdate",L),w(t,"ended",e[16]),w(_,"mousedown",ot(e[19])),w(_,"mouseup",e[20]),w(_,"touchstart",e[19]),w(_,"touchend",e[20],{passive:!0})],W=!0)},p(d,C){(!q||C[0]&256&&!ge(t.src,n=d[8]))&&p(t,"src",n),C[0]&2&&i!==(i=d[1])&&t[i?"pause":"play"](),!o&&C[0]&128&&!isNaN(d[7])&&(t.currentTime=d[7]),o=!1;let I=f;if(f=X(d),f===I?M[f].p(d,C):(pt(),_e(M[I],1,1,()=>{M[I]=null}),_t(),m=M[f],m?m.p(d,C):(m=M[f]=P[f](d),m.c()),re(m,1),m.m(h,null)),C[0]&4640){z=d[5];let R;for(R=0;R<z.length;R+=1){const x=ve(d,z,R);T[R]?T[R].p(x,C):(T[R]=ke(x),T[R].c(),T[R].m(s,null))}for(;R<T.length;R+=1)T[R].d(1);T.length=z.length}},i(d){q||(re(m),q=!0)},o(d){_e(m),q=!1},d(d){d&&g(t),e[28](null),d&&g(l),d&&g(_),M[f].d(),it(T,d),S(),W=!1,F(V)}}}const ae=128,Lt=800,Nt=500,Dt=50,Ot=600;function Pt(e,t,n){let i;const o=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=-55;let l=!1,_=!1,h=!1,u,v=[],f,m,a=[],c,s,S="",q,W,V=!1,L=!1,P=!0,M=null;async function X(){f=new AudioContext,await z(),T(),n(2,l=!0)}ut(()=>{clearInterval(le),clearTimeout(Y),clearTimeout(G)});async function z(){try{const y=await navigator.mediaDevices.getUserMedia({audio:!0});n(3,_=!0),u=new MediaRecorder(y),u.onstart=()=>{},u.ondataavailable=$=>{L?(v.push($.data),n(10,L=!1)):v=[]},u.onstop=async $=>{if(v.length===0)return;const xe=new Blob(v,{type:u.mimeType});v=[],S&&URL.revokeObjectURL(S),n(8,S=URL.createObjectURL(xe)),c.load(),await at(),se()};const ce=f.createMediaStreamSource(y),Z=f.createAnalyser();Z.fftSize=ae,Z.minDecibels=r,ce.connect(Z);const Xe=Z.frequencyBinCount;n(5,a=new Uint8Array(Xe));const me=()=>{h&&(Z.getByteFrequencyData(a),V=a.some($=>$>0),V?Oe():Pe()),requestAnimationFrame(me)};me()}catch(y){console.error(`The following getUserMedia error occurred: ${y}`)}}function T(){const y=f.createMediaElementSource(c);m=f.createAnalyser(),m.fftSize=ae,y.connect(m),m.connect(f.destination);const ce=m.frequencyBinCount;n(5,a=new Uint8Array(ce))}function d(){if(P){n(5,a=a.fill(0));return}m.getByteFrequencyData(a),n(5,a),requestAnimationFrame(d)}async function C(){!l||L||(n(10,L=!0),R(),h||u.start())}function I(){l&&u.state==="recording"&&u.stop()}function R(){clearTimeout(M),n(11,M=null),c.pause(),n(7,s=0)}function x(){n(11,M=setTimeout(()=>se(),Lt))}let le;function De(){he(),le=setInterval(he,Nt)}function he(){L||(u.state==="recording"&&u.stop(),u.state==="inactive"&&u.start())}let Y;function Oe(){clearTimeout(G),G=null,Y||(Y=setTimeout(()=>{C()},Dt))}let G;function Pe(){clearTimeout(Y),Y=null,G||(G=setTimeout(()=>{I()},Ot))}function Ue(y){y.code==="Escape"&&(!P||M)&&R(),!h&&y.code==="Space"&&C()}function ze(y){h||y.code==="Space"&&I()}function Fe(y){!l||h||(y.preventDefault(),C())}function We(){h||I()}function Be(y){n(4,h=y.target.checked),h?De():(clearInterval(le),n(10,L=!1),u.state==="recording"&&u.stop())}async function se(){try{await c.play()}catch(y){console.error("ERROR playing audio",y)}}function je(y){D.call(this,e,y)}function He(y){D.call(this,e,y)}function Ke(y){D.call(this,e,y)}function Ve(y){D.call(this,e,y)}function Ye(y){D.call(this,e,y)}function Ge(y){de[y?"unshift":"push"](()=>{c=y,n(6,c)})}function Ze(){P=this.paused,n(1,P)}function Je(){s=this.currentTime,n(7,s)}function Qe(){q=this.clientWidth,W=this.clientHeight,n(0,q),n(9,W)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(12,i=q/ae*2),e.$$.dirty[0]&2&&(P||d())},[q,P,l,_,h,a,c,s,S,W,L,M,i,o,X,R,x,Ue,ze,Fe,We,Be,se,je,He,Ke,Ve,Ye,Ge,Ze,Je,Qe]}class Ut extends Ne{constructor(t){super(),Le(this,t,Pt,It,Te,{},null,[-1,-1])}}new Ut({target:document.getElementById("app")});
