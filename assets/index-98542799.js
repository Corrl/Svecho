(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const s of r.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&i(s)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();function E(){}function Me(e){return e()}function ve(){return Object.create(null)}function U(e){e.forEach(Me)}function Ie(e){return typeof e=="function"}function me(e,t){return e!=e?t==t:e!==t||e&&typeof e=="object"||typeof e=="function"}let ne;function ke(e,t){return ne||(ne=document.createElement("a")),ne.href=t,e===ne.href}function rt(e){return Object.keys(e).length===0}const lt=typeof window<"u";let st=lt?e=>requestAnimationFrame(e):E;const Ne=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;"WeakMap"in Ne;function L(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function m(e){e.parentNode&&e.parentNode.removeChild(e)}function ct(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function qe(e){return document.createElementNS("http://www.w3.org/2000/svg",e)}function z(e){return document.createTextNode(e)}function q(){return z(" ")}function w(e,t,n,i){return e.addEventListener(t,n,i),()=>e.removeEventListener(t,n,i)}function C(e){return function(t){return t.stopPropagation(),e.call(this,t)}}function d(e,t,n){n==null?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function ut(e){return Array.from(e.childNodes)}function Ee(e,t){t=""+t,e.data!==t&&(e.data=t)}function _e(e,t,n,i){n==null?e.style.removeProperty(t):e.style.setProperty(t,n,i?"important":"")}let ie;function at(){if(ie===void 0){ie=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{ie=!0}}return ie}function ft(e,t){getComputedStyle(e).position==="static"&&(e.style.position="relative");const i=v("iframe");i.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),i.setAttribute("aria-hidden","true"),i.tabIndex=-1;const o=at();let r;return o?(i.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",r=w(window,"message",s=>{s.source===i.contentWindow&&t()})):(i.src="about:blank",i.onload=()=>{r=w(i.contentWindow,"resize",t),t()}),L(e,i),()=>{(o||r&&i.contentWindow)&&r(),m(i)}}function oe(e,t,n){e.classList[n?"add":"remove"](t)}let ee;function x(e){ee=e}function De(){if(!ee)throw new Error("Function called outside component initialization");return ee}function dt(e){De().$$.on_mount.push(e)}function _t(e){De().$$.on_destroy.push(e)}function I(e,t){const n=e.$$.callbacks[t.type];n&&n.slice().forEach(i=>i.call(this,t))}const Z=[],pe=[];let Q=[];const Se=[],Oe=Promise.resolve();let he=!1;function Pe(){he||(he=!0,Oe.then(Ue))}function pt(){return Pe(),Oe}function le(e){Q.push(e)}const fe=new Set;let G=0;function Ue(){if(G!==0)return;const e=ee;do{try{for(;G<Z.length;){const t=Z[G];G++,x(t),ht(t.$$)}}catch(t){throw Z.length=0,G=0,t}for(x(null),Z.length=0,G=0;pe.length;)pe.pop()();for(let t=0;t<Q.length;t+=1){const n=Q[t];fe.has(n)||(fe.add(n),n())}Q.length=0}while(Z.length);for(;Se.length;)Se.pop()();he=!1,fe.clear(),x(e)}function ht(e){if(e.fragment!==null){e.update(),U(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(le)}}function mt(e){const t=[],n=[];Q.forEach(i=>e.indexOf(i)===-1?t.push(i):n.push(i)),n.forEach(i=>i()),Q=t}const re=new Set;let H;function Re(){H={r:0,c:[],p:H}}function Te(){H.r||U(H.c),H=H.p}function B(e,t){e&&e.i&&(re.delete(e),e.i(t))}function J(e,t,n,i){if(e&&e.o){if(re.has(e))return;re.add(e),H.c.push(()=>{re.delete(e),i&&(n&&e.d(1),i())}),e.o(t)}else i&&i()}const gt=["allowfullscreen","allowpaymentrequest","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","hidden","inert","ismap","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected"];[...gt];function ze(e){e&&e.c()}function ge(e,t,n,i){const{fragment:o,after_update:r}=e.$$;o&&o.m(t,n),i||le(()=>{const s=e.$$.on_mount.map(Me).filter(Ie);e.$$.on_destroy?e.$$.on_destroy.push(...s):U(s),e.$$.on_mount=[]}),r.forEach(le)}function ye(e,t){const n=e.$$;n.fragment!==null&&(mt(n.after_update),U(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function yt(e,t){e.$$.dirty[0]===-1&&(Z.push(e),Pe(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function we(e,t,n,i,o,r,s,y=[-1]){const u=ee;x(e);const c=e.$$={fragment:null,ctx:[],props:r,update:E,not_equal:o,bound:ve(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(u?u.$$.context:[])),callbacks:ve(),dirty:y,skip_bound:!1,root:t.target||u.$$.root};s&&s(c.root);let b=!1;if(c.ctx=n?n(e,t.props||{},(h,f,...l)=>{const _=l.length?l[0]:f;return c.ctx&&o(c.ctx[h],c.ctx[h]=_)&&(!c.skip_bound&&c.bound[h]&&c.bound[h](_),b&&yt(e,h)),f}):[],c.update(),b=!0,U(c.before_update),c.fragment=i?i(c.ctx):!1,t.target){if(t.hydrate){const h=ut(t.target);c.fragment&&c.fragment.l(h),h.forEach(m)}else c.fragment&&c.fragment.c();t.intro&&B(e.$$.fragment),ge(e,t.target,t.anchor,t.customElement),Ue()}x(u)}class be{$destroy(){ye(this,1),this.$destroy=E}$on(t,n){if(!Ie(n))return E;const i=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return i.push(n),()=>{const o=i.indexOf(n);o!==-1&&i.splice(o,1)}}$set(t){this.$$set&&!rt(t)&&(this.$$.skip_bound=!0,this.$$set(t),this.$$.skip_bound=!1)}}function wt(e){let t,n,i,o,r,s,y,u,c,b,h,f,l;return{c(){t=v("div"),n=v("div"),i=z(e[2]),o=q(),r=v("label"),s=v("input"),y=q(),u=v("span"),c=q(),b=v("div"),h=z(e[3]),d(n,"class","left-option svelte-1a1qoh6"),oe(n,"active",!e[0]),d(s,"type","checkbox"),d(s,"class","svelte-1a1qoh6"),d(u,"class","slider svelte-1a1qoh6"),d(r,"class","switch svelte-1a1qoh6"),d(b,"class","right-option svelte-1a1qoh6"),oe(b,"active",e[0]),d(t,"class","switch-wrapper svelte-1a1qoh6"),_e(t,"--color",e[1])},m(_,k){g(_,t,k),L(t,n),L(n,i),L(t,o),L(t,r),L(r,s),s.checked=e[0],L(r,y),L(r,u),L(t,c),L(t,b),L(b,h),f||(l=[w(s,"change",e[9]),w(s,"change",e[8]),w(s,"change",bt),w(t,"mousedown",C(e[4])),w(t,"mouseup",C(e[5])),w(t,"touchstart",C(e[6])),w(t,"touchend",C(e[7]))],f=!0)},p(_,[k]){k&4&&Ee(i,_[2]),k&1&&oe(n,"active",!_[0]),k&1&&(s.checked=_[0]),k&8&&Ee(h,_[3]),k&1&&oe(b,"active",_[0]),k&2&&_e(t,"--color",_[1])},i:E,o:E,d(_){_&&m(t),f=!1,U(l)}}}const bt=e=>e.target.blur();function vt(e,t,n){let{checked:i=!1}=t,{color:o="var(--color-main)"}=t,{left:r="manual"}=t,{right:s="automatic"}=t;function y(l){I.call(this,e,l)}function u(l){I.call(this,e,l)}function c(l){I.call(this,e,l)}function b(l){I.call(this,e,l)}function h(l){I.call(this,e,l)}function f(){i=this.checked,n(0,i)}return e.$$set=l=>{"checked"in l&&n(0,i=l.checked),"color"in l&&n(1,o=l.color),"left"in l&&n(2,r=l.left),"right"in l&&n(3,s=l.right)},[i,o,r,s,y,u,c,b,h,f]}class kt extends be{constructor(t){super(),we(this,t,vt,wt,me,{checked:0,color:1,left:2,right:3})}}function Et(e){let t,n;return{c:E,m(i,o){t||(n=[w(window,"keydown",e[0]),w(window,"keyup",e[1])],t=!0)},p:E,i:E,o:E,d(i){t=!1,U(n)}}}function St(e,t,n){let{record:i}=t,{stopRecording:o}=t;function r(u){u.preventDefault(),i()}dt(()=>{const u=document.querySelector("main");return u.addEventListener("mousedown",r),u.addEventListener("mouseup",o),u.addEventListener("touchstart",r),u.addEventListener("touchend",o),()=>{u.removeEventListener("mousedown",r),u.removeEventListener("mouseup",o),u.removeEventListener("touchstart",r),u.removeEventListener("touchend",o)}});function s(u){u.code==="Space"&&i()}function y(u){u.code==="Space"&&o()}return e.$$set=u=>{"record"in u&&n(2,i=u.record),"stopRecording"in u&&n(3,o=u.stopRecording)},[s,y,i,o]}class Rt extends be{constructor(t){super(),we(this,t,St,Et,me,{record:2,stopRecording:3})}}const{cancelAnimationFrame:Tt}=Ne;function Ae(e,t,n){const i=e.slice();return i[55]=t[n],i[57]=n,i}function Le(e){let t,n;return t=new Rt({props:{record:e[15],stopRecording:e[16]}}),{c(){ze(t.$$.fragment)},m(i,o){ge(t,i,o),n=!0},p:E,i(i){n||(B(t.$$.fragment,i),n=!0)},o(i){J(t.$$.fragment,i),n=!1},d(i){ye(t,i)}}}function At(e){let t,n;return{c(){t=v("b"),t.textContent="getUserMedia",n=z(" is not supported on your browser ðŸ˜”")},m(i,o){g(i,t,o),g(i,n,o)},p:E,i:E,o:E,d(i){i&&m(t),i&&m(n)}}}function Lt(e){let t,n,i;return{c(){t=v("p"),t.textContent="You need to grant access to your microphone",n=q(),i=v("p"),i.textContent="Watch out for a dialog or microphone icon in the address bar",_e(t,"font-weight","bold")},m(o,r){g(o,t,r),g(o,n,r),g(o,i,r)},p:E,i:E,o:E,d(o){o&&m(t),o&&m(n),o&&m(i)}}}function Ct(e){let t,n,i,o,r,s;t=new kt({props:{checked:e[3]}}),t.$on("change",e[19]);function y(l,_){return l[3]?Nt:It}let u=y(e),c=u(e);function b(l,_){if(l[9])return Ot;if(!l[10]||l[11])return Dt;if(l[7])return qt}let h=b(e),f=h&&h(e);return{c(){ze(t.$$.fragment),n=q(),i=v("p"),c.c(),o=q(),r=v("div"),f&&f.c(),d(i,"id","instruction"),d(i,"class","svelte-1w98i0i"),d(r,"id","control-btns"),d(r,"class","svelte-1w98i0i")},m(l,_){ge(t,l,_),g(l,n,_),g(l,i,_),c.m(i,null),g(l,o,_),g(l,r,_),f&&f.m(r,null),s=!0},p(l,_){const k={};_[0]&8&&(k.checked=l[3]),t.$set(k),u!==(u=y(l))&&(c.d(1),c=u(l),c&&(c.c(),c.m(i,null))),h===(h=b(l))&&f?f.p(l,_):(f&&f.d(1),f=h&&h(l),f&&(f.c(),f.m(r,null)))},i(l){s||(B(t.$$.fragment,l),s=!0)},o(l){J(t.$$.fragment,l),s=!1},d(l){ye(t,l),l&&m(n),l&&m(i),c.d(),l&&m(o),l&&m(r),f&&f.d()}}}function Mt(e){let t,n,i,o,r;return{c(){t=v("p"),t.textContent="Record yourself and listen to the echo",n=q(),i=v("button"),i.textContent="initialize",d(i,"id","init-btn"),d(i,"class","svelte-1w98i0i")},m(s,y){g(s,t,y),g(s,n,y),g(s,i,y),o||(r=w(i,"click",C(e[14])),o=!0)},p:E,i:E,o:E,d(s){s&&m(t),s&&m(n),s&&m(i),o=!1,r()}}}function It(e){let t,n,i,o,r;return{c(){t=z("Clickâ€‰/â€‰touch anywhere on the screen or press 'Space' "),n=v("u"),n.textContent="and hold",i=z(` to
                        record.`),o=v("br"),r=z(`
                        Release to stop recording and listen to playback in a loop.`)},m(s,y){g(s,t,y),g(s,n,y),g(s,i,y),g(s,o,y),g(s,r,y)},d(s){s&&m(t),s&&m(n),s&&m(i),s&&m(o),s&&m(r)}}}function Nt(e){let t,n,i;return{c(){t=z("Simply start speaking to start recording."),n=v("br"),i=z(`
                        Stop speaking to stop recording and listen to playback in a loop.`)},m(o,r){g(o,t,r),g(o,n,r),g(o,i,r)},d(o){o&&m(t),o&&m(n),o&&m(i)}}}function qt(e){let t,n,i;return{c(){t=v("button"),t.textContent="â–¶ï¸Ž PLAY",d(t,"id","play-btn"),d(t,"class","svelte-1w98i0i")},m(o,r){g(o,t,r),n||(i=[w(t,"click",C(e[20])),w(t,"mousedown",C(e[25])),w(t,"mouseup",C(e[26])),w(t,"touchstart",C(e[27])),w(t,"touchend",C(e[28]))],n=!0)},p:E,d(o){o&&m(t),n=!1,U(i)}}}function Dt(e){let t,n,i;return{c(){t=v("button"),t.textContent="â—¼ï¸Ž STOP",d(t,"id","stop-btn"),d(t,"class","svelte-1w98i0i")},m(o,r){g(o,t,r),n||(i=[w(t,"click",C(e[17])),w(t,"mousedown",C(e[21])),w(t,"mouseup",C(e[22])),w(t,"touchstart",C(e[23])),w(t,"touchend",C(e[24]))],n=!0)},p:E,d(o){o&&m(t),n=!1,U(i)}}}function Ot(e){let t;return{c(){t=v("div"),t.textContent="REC",d(t,"class","recording svelte-1w98i0i")},m(n,i){g(n,t,i)},p:E,d(n){n&&m(t)}}}function Ce(e){let t,n,i,o;return{c(){t=qe("rect"),d(t,"width",e[12]),d(t,"height",n=e[55]/255*e[8]),d(t,"x",i=e[57]*e[12]),d(t,"y",o=e[8]-e[55]/255*e[8]),d(t,"fill","#ff3b00")},m(r,s){g(r,t,s)},p(r,s){s[0]&4096&&d(t,"width",r[12]),s[0]&272&&n!==(n=r[55]/255*r[8])&&d(t,"height",n),s[0]&4096&&i!==(i=r[57]*r[12])&&d(t,"x",i),s[0]&272&&o!==(o=r[8]-r[55]/255*r[8])&&d(t,"y",o)},d(r){r&&m(t)}}}function Pt(e){let t,n,i,o=!0,r=!1,s,y,u,c,b,h,f,l,_,k,M,j,D,F,K,S=e[1]&&!e[3]&&Le(e);function O(){Tt(s),n.paused||(s=st(O),r=!0),e[32].call(n)}const V=[Mt,Ct,Lt,At],P=[];function te(a,R){return a[1]?a[13]&&a[2]?1:a[13]&&!a[2]?2:3:0}f=te(e),l=P[f]=V[f](e);let W=e[4],T=[];for(let a=0;a<W.length;a+=1)T[a]=Ce(Ae(e,W,a));return{c(){S&&S.c(),t=q(),n=v("audio"),y=q(),u=v("main"),c=v("div"),b=v("h1"),b.textContent="Svecho",h=q(),l.c(),_=q(),k=v("div"),M=qe("svg");for(let a=0;a<T.length;a+=1)T[a].c();ke(n.src,i=e[7])||d(n,"src",i),d(b,"class","svelte-1w98i0i"),d(c,"id","control"),d(c,"class","svelte-1w98i0i"),d(M,"xmlns","http://www.w3.org/2000/svg"),d(M,"class","svelte-1w98i0i"),d(k,"id","visual-wrapper"),d(k,"class","svelte-1w98i0i"),le(()=>e[33].call(k)),d(u,"class","svelte-1w98i0i")},m(a,R){S&&S.m(a,R),g(a,t,R),g(a,n,R),e[30](n),g(a,y,R),g(a,u,R),L(u,c),L(c,b),L(c,h),P[f].m(c,null),L(u,_),L(u,k),L(k,M);for(let N=0;N<T.length;N+=1)T[N]&&T[N].m(M,null);j=ft(k,e[33].bind(k)),D=!0,F||(K=[w(window,"keydown",e[29]),w(n,"play",e[31]),w(n,"pause",e[31]),w(n,"timeupdate",O),w(n,"ended",e[18])],F=!0)},p(a,R){a[1]&&!a[3]?S?(S.p(a,R),R[0]&10&&B(S,1)):(S=Le(a),S.c(),B(S,1),S.m(t.parentNode,t)):S&&(Re(),J(S,1,1,()=>{S=null}),Te()),(!D||R[0]&128&&!ke(n.src,i=a[7]))&&d(n,"src",i),R[0]&1024&&o!==(o=a[10])&&n[o?"pause":"play"](),!r&&R[0]&64&&!isNaN(a[6])&&(n.currentTime=a[6]),r=!1;let N=f;if(f=te(a),f===N?P[f].p(a,R):(Re(),J(P[N],1,1,()=>{P[N]=null}),Te(),l=P[f],l?l.p(a,R):(l=P[f]=V[f](a),l.c()),B(l,1),l.m(c,null)),R[0]&4368){W=a[4];let A;for(A=0;A<W.length;A+=1){const Y=Ae(a,W,A);T[A]?T[A].p(Y,R):(T[A]=Ce(Y),T[A].c(),T[A].m(M,null))}for(;A<T.length;A+=1)T[A].d(1);T.length=W.length}},i(a){D||(B(S),B(l),D=!0)},o(a){J(S),J(l),D=!1},d(a){S&&S.d(a),a&&m(t),a&&m(n),e[30](null),a&&m(y),a&&m(u),P[f].d(),ct(T,a),j(),F=!1,U(K)}}}const de=128,Ut=800,zt=500,Ft=50,Wt=600;function Bt(e,t,n){let i;const o=navigator.mediaDevices&&navigator.mediaDevices.getUserMedia,r=-45;let s=!1,y=!1,u=!1,c,b=[],h,f,l=[],_,k=[],M,j,D,F,K,S=!1,O=!1,V=!0;async function P(){h=new AudioContext,await te(),W(),n(1,s=!0)}_t(()=>{clearInterval(se),clearTimeout(X),clearTimeout($)});async function te(){try{const p=await navigator.mediaDevices.getUserMedia({audio:!0});n(2,y=!0),c=new MediaRecorder(p),c.onstart=()=>{},c.ondataavailable=ae=>{O?(b.push(ae.data),n(9,O=!1)):b=[]},c.onstop=async()=>{if(b.length===0)return;const ae=new Blob(b,{type:c.mimeType});b=[],D&&URL.revokeObjectURL(D),n(7,D=URL.createObjectURL(ae)),await pt(),await ce()};const ue=h.createMediaStreamSource(p);_=h.createAnalyser(),_.fftSize=de,_.minDecibels=r,ue.connect(_);const ot=_.frequencyBinCount;k=new Uint8Array(ot)}catch(p){console.error(`The following getUserMedia error occurred: ${p}`)}}function W(){const p=h.createMediaElementSource(M);f=h.createAnalyser(),f.fftSize=de,p.connect(f),f.connect(h.destination);const ue=f.frequencyBinCount;n(4,l=new Uint8Array(ue))}let T;function a(){if(!u){cancelAnimationFrame(T);return}_.getByteFrequencyData(k),S=k.some(p=>p>0),S?je():He(),T=requestAnimationFrame(a)}async function R(){O||(n(9,O=!0),Y(),!u&&c.state==="inactive"&&c.start())}function N(){O&&(c.stop(),u&&c.start())}let A=null;function Y(){clearTimeout(A),n(11,A=null),M.pause(),n(6,j=0)}function Fe(){n(11,A=setTimeout(ce,Ut))}let se;function We(){se=setInterval(Be,zt)}function Be(){O||(c.state==="recording"&&c.stop(),c.state==="inactive"&&c.start())}let X;function je(){clearTimeout($),$=null,X||(X=setTimeout(()=>{R()},Ft))}let $;function He(){clearTimeout(X),X=null,$||($=setTimeout(()=>{N()},Wt))}function Ke(p){n(3,u=p.target.checked),c.state==="recording"&&c.stop(),u?(c.start(),We(),a()):clearInterval(se)}async function ce(){try{await M.play()}catch(p){console.error("ERROR playing audio",p)}}function Ve(p){I.call(this,e,p)}function Ye(p){I.call(this,e,p)}function Ge(p){I.call(this,e,p)}function Ze(p){I.call(this,e,p)}function Je(p){I.call(this,e,p)}function Qe(p){I.call(this,e,p)}function Xe(p){I.call(this,e,p)}function $e(p){I.call(this,e,p)}const xe=p=>{p.code==="Escape"&&Y()};function et(p){pe[p?"unshift":"push"](()=>{M=p,n(5,M)})}function tt(){V=this.paused,n(10,V)}function nt(){j=this.currentTime,n(6,j)}function it(){F=this.clientWidth,K=this.clientHeight,n(0,F),n(8,K)}return e.$$.update=()=>{e.$$.dirty[0]&1&&n(12,i=F/de*2)},[F,s,y,u,l,M,j,D,K,O,V,A,i,o,P,R,N,Y,Fe,Ke,ce,Ve,Ye,Ge,Ze,Je,Qe,Xe,$e,xe,et,tt,nt,it]}class jt extends be{constructor(t){super(),we(this,t,Bt,Pt,me,{},null,[-1,-1])}}new jt({target:document.getElementById("app")});
